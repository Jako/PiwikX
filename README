On some customer websites I use Piwik as software for web analytics. The following 
MODx module (version 0.6.6a) displays a few Piwik widgets in the MODx backend 
and the corresponding plugin inserts the suitable code for Piwik at the end of the 
html code generated by MODx.

The base of the module/plugin is an separate (!) installation of Piwik. 

First download the files/folders of the module and upload them to /assets/modules/piwikx.

Then you have to create a new plugin called PiwikX and paste the content of 
piwikx.plugin.txt into it. 

Now you have to create a new module and paste content of 
piwikx.module.txt into it.

Now the module can be called now after reloading the MODx manager. Since the module is 
not yet configured, a summary page with the minimal and the complete configuration will 
be displayed. One of these configurations must be inserted in the module configuration 
and the settings have to filled according to the corresponding Piwik installation. 

As an example the minimal configuration is shown here:
&piwikURL=URL to your Piwik installation;text;http://your.piwik.installation
&piwikSiteId=Piwik Site ID;text;1
&piwikUsername=Username to display the Piwik widgets;text;
&piwikPassword=md5 encrypted password to display the Piwik widgets;text;

piwikURL contains the url of the Piwik installation.

piwikSiteId contains the id of the website inside of piwik (Piwik -> Admin settings -> Sites).

piwikUsername contains the name of a new user inside of piwik (Piwik -> Admin settings -> Users).
This user has to have viewing acces for the website to track. Caution: This user cannot be 
the piwik super user.

piwikPassword is the md5 encrypted password of this user (Piwik -> Admin settings -> Users).

piwikActionName contains the name of a template variable. The content of this variable will be parsed 
(contained snippet calls will be executed and document or template variables will be replaced Ð 
snippets have to be called cached und template variables should be called as in page templates ) 
and used as tracking title for Piwik. If this option is not set, the pagetitle will be used 
as tracking title.

piwikUserExclude and piwikGroupExclude could contain a comma-separated list of user names and/or 
web groups. These users and/or groups will be excluded from piwik tracking if they are logged into 
the MODx frontend or backend.

After that you have to enable parameter sharing in the module configuration and add the PiwikX plugin
in the dependencies of the module.

The module should display now a few Piwik widgets in the MODx backend. The configuration of these widgets 
could be set in the file <language>.managerwidgets.php Ð a small howto for modifications in this file 
is written in the german documentation on http://www.partout.info/piwik_modx.html.

Now you have to select PiwikX in 'import module shared parameters' of the PiwikX plugin configuration 
and activate OnParseDocument as system event for the plugin. After saving the plugin the Piwik code 
will be inserted at the end of the html code generated by MODx. Since this code is enclosed in a DIV 
with the class piwik, it could be hidden by  .piwik { display: none } in the CSS file.